<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Go实现的双向链表</title>
    
    <meta name="author" content="mahang">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/twitter/stylesheets/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css" type="text/css" rel="stylesheet" media="all">


    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->
</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
        <div class="container">
            <a class="brand" href="/">娲剧濂骞绘娴</a>
            <ul class="nav">
                
                


  <li><a href="/archive">Archive</a></li>


                
                


  <li><a href="/tags">Tags</a></li>


                
                


  <li><a href="/categories">Categories</a></li>


                
                


  <li><a href="/pages">Pages</a></li>


                
                


  <li><a href="/about">About Me</a></li>


                
            </ul>
        </div>
    </div>
</div>

<div class="container">

    <div class="content">
        <div class="page-header">
    <h1>Go实现的双向链表 </h1>
</div>

<div class="row">
    <div class="span9">
        <ul>
<li>基本上就是把数据结构中学习的c的双向链表用go来重写了一遍</li>
</ul>

<pre><code>package codeforfun
// List中的单个元素
type Element struct {
    // 前后指针
    next,  prev *Element
    // 包含的实际值
    Value interface{}
}
type LinkedList struct {
    // 头指针, 尾指针
    head,  tail *Element
    length         int
}
// 创建List
func NewLinkedList() *LinkedList {
    linkedList := new(LinkedList)
    return linkedList
}
func (l *LinkedList) Head() *Element { return l.head }
func (l *LinkedList) Tail() *Element { return l.tail }
func (e *Element) Next() *Element { return e.next }
func (e *Element) Prev() *Element { return e.prev }
func (l *LinkedList) Remove(e *Element) interface{} {
    l.remove(e)
    return e.Value
}
// 执行实际的删除操作
func (l *LinkedList) remove(e *Element) {
    if e.prev == nil {
        // 如果e处于链表的开头, 将链表的头指针指向e的下一个Element
        l.head = e.next
    } else {
        // 将e的前一个Element的next指针指向e的后一个Element
        e.prev.next = e.next
    }
    if e.next == nil {
        // 如果e处于链表的末尾, 将链表的尾指针指向e的前一个Element
        l.tail = e.prev
    } else {
        // 将e的后一个Element的prev指针指向e的前一个Element
        e.next.prev = e.prev
    }
    e.prev = nil
    e.next = nil
    l.length--
}
// 在mark之前插入e
func (l *LinkedList) insertBefore(e *Element, mark *Element) {
    if mark.prev == nil {
        // 头指针指向e
        l.head = e
    } else {
        // 将mark的前一个Element的next指针指向e
        mark.prev.next = e
    }
    // 调整e和mark的前后指针
    e.prev = mark.prev
    mark.prev = e
    e.next = mark
    l.length++
}
// 在mark之后插入e
func (l *LinkedList) insertAfter(e *Element, mark *Element) {
    if mark.next == nil {
        // 尾指针指向e
        l.tail = e
    } else {
        // 将mark的后一个Element的prev指针指向e
        mark.next.prev = e
    }
    // 调整e和mark的前后指针
    e.next = mark.next
    mark.next = e
    e.prev = mark
    l.length++
}
// 在链表的开头插入e
func (l *LinkedList) insertFront(e *Element) {
    if l.head == nil {
        // 空链表单独处理
        l.head, l.tail = e, e
        e.prev, e.next = nil, nil
        l.length = 1
        return
    }
    l.insertBefore(e, l.head)
}
// 在链表的末尾插入e
func (l *LinkedList) insertBack(e *Element) {
    if l.tail == nil {
        // 空链表单独处理
        l.head, l.tail = e, e
        e.prev, e.next = nil, nil
        l.length = 1
        return
    }
    l.insertAfter(e, l.tail)
}
// 将Value包装成Element, 并将Element插入链表开头
func (l *LinkedList) PushHead(Value interface{}) *Element {
    e := &amp;Element{nil, nil, Value}
    l.insertFront(e)
    return e
}
// 将Value包装成Element, 并将Element插入链表末尾
func (l *LinkedList) PushTail(Value interface{}) *Element {
    e := &amp;Element{nil, nil, Value}
    l.insertBack(e)
    return e
}
// 将Value包装成Element, 并将Element插入mark之前
func (l *LinkedList) InsertBefore(Value interface{}, mark *Element) *Element {
    e := &amp;Element{nil, nil, Value}
    l.insertBefore(e, mark)
    return e
}
// 将Value包装成Element, 并将Element插入mark之后
func (l *LinkedList) InsertAfter(Value interface{}, mark *Element) *Element {
    e := &amp;Element{nil, nil, Value}
    l.insertAfter(e, mark)
    return e
}
// 将e移动到链表的开头
func (l *LinkedList) MoveToFront(e *Element) {
    if l.head == e {
        return
    }
    // 先将e删除, 然后在链表开头插入
    l.remove(e)
    l.insertFront(e)
}
// 将e移动到链表的末尾
func (l *LinkedList) MoveToBack(e *Element) {
    if l.tail == e {
        return
    }
    // 先将e删除, 然后在链表末尾插入
    l.remove(e)
    l.insertBack(e)
}
// 将ol整体插入链表的开头
func (l *LinkedList) PushFrontList(ol *LinkedList) {
    first := ol.Head()
    // 从ol的尾部开始, 依次将ol的每个Value插入链表的开头
    for e := ol.Tail(); e != nil; e = e.Prev() {
        l.PushHead(e.Value)
        if e == first {
            break
        }
    }
}
// 将ol整体插入链表的末尾
func (l *LinkedList) PushBackList(ol *LinkedList) {
    last := ol.Tail()
    // 从ol的头部开始, 依次将ol的每个Value插入链表的末尾
    for e := ol.Head(); e != nil; e = e.Next() {
        l.PushTail(e.Value)
        if e == last {
            break
        }
    }
}
func (l *LinkedList) Len() int { return l.length }
</code></pre>

        <hr>
        <div class="pagination">
            <ul>
                <ul>
                    
                    
                    <li class="prev disabled"><a>&larr; Previous</a></li>
                    

                    <li><a href="/archive">Archive</a></li>

                    
                    <li class="next"><a href="/go/go%CA%B5%CF%D6%C5%C5%D0%F2%B5%C4%C1%B4%B1%ED/" title="go实现排序的链表">Next &rarr;</a></li>
                    
                    
                </ul>
            </ul>
        </div>
        <hr>
        
<div id="disqus_thread"></div>
<script>
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>

    <div class="span3">
        <h4>Published</h4>
        <div class="date"><span>2013-08-14</span></div>
        <br>
        <h4>Categories</h4>
        <ul class="tag_box">
            
            <li>
  <a href="/categories/#go-ref">go <span>2</span></a>
</li>
            
        </ul>
        <br>
        <h4>Tags</h4>
        <ul class="tag_box">
            
            <li>
  <a href="/tags/#go-ref">go <span>2</span></a>
</li>
            
        </ul>
    </div>
</div>

    </div>

    <footer>
        <p>&copy; mahang 2013
            with help from <a href="http://github.com/wendal/gor" target="_blank" title="Gor -- Fast Blog">Gor</a>
            and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
            and Idea from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
        </p>
    </footer>

</div> <!-- /container -->


<script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>


<script>
    var _gaq=[['_setAccount','UA-123-12'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
</body>
</html>
