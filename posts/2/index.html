
---
layout : default
---

<div class="page-header">
  <h1>Blogs</h1>
</div>


<div class="row">
  <div class="span12">

    <div class="pagination">
      <ul>
      
        
        
          <li><a href="/posts/1/">1</a></li>
        
      
        
          <li class="active"><a href="/posts/2/">2</a></li>
        
        
      
      </ul>
    </div>


    
      <div class="post">
        <h1 class="title"><a href="/raspberry/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%8A%98%E8%85%BE%E6%89%8B%E8%AE%B0/">树莓派折腾手记</a> <span class="date">2013-05-22</span></h1>

        <h2>OS X下通过下面的命令能够把镜像写入SD</h2>

<pre><code>unzip 2013-02-09-wheezy-raspbian.zip
df -h
sudo diskutil unmount /dev/rdisk1s1
sudo dd bs=1m if=2013-02-09-wheezy-raspbian.img of=/dev/rdisk1
sudo diskutil eject /dev/rdisk1
</code></pre>

<p>更换了一个更加快速的源</p>

<hr />

<p>pi的源列表: <a href="http://www.raspbian.org/RaspbianMirrors">http://www.raspbian.org/RaspbianMirrors</a> 测试了之后发现这个源在国内更新最快 <a href="http://mirror.devunt.kr/raspbian/raspbian/">http://mirror.devunt.kr/raspbian/raspbian/</a></p>

<p>更换源：
<code>sudo vi /etc/apt/sources.list</code>
更改为：</p>


        <div class="more">
          <a href="/raspberry/%E6%A0%91%E8%8E%93%E6%B4%BE%E6%8A%98%E8%85%BE%E6%89%8B%E8%AE%B0/" class="btn btn-small">阅读全文</a>
        </div>
      </div>
    
      <div class="post">
        <h1 class="title"><a href="/2012/new-born.html">你的第一篇博客</a> <span class="date">2012-12-22</span></h1>

        <h1>感谢你使用Gor编写博客</h1>

<h2>本文位于 posts/first-blog.md , 你可以任何删掉,修改这个文件。</h2>

<p>文件开头是当前文章的元数据</p>

<ol>
<li>date为自动生成, 当然,你可以修改,这是你的自由</li>
<li>permalink 可以是固定地址,也可以由gor为你自动生成</li>
<li>categories 就是分类, 可以多个</li>
<li>tags 同理,多个标签也是很常见的</li>
</ol>

<p>请确保文件使用UTF8 without BOM编码</p>

<h2>你可以通过执行下面的语句来新建一篇博客:</h2>

<pre><code>gor post 文章标题
</code></pre>


        <div class="more">
          <a href="/2012/new-born.html" class="btn btn-small">阅读全文</a>
        </div>
      </div>
    
      <div class="post">
        <h1 class="title"><a href="/code/%E8%AF%BB%E5%8F%96%E7%BD%91%E7%BB%9C%E4%B8%8A%E6%96%87%E4%BB%B6%E5%88%B0%E5%86%85%E5%AD%98/">读取网络上文件到内存</a> <span class="date">2011-12-19</span></h1>

        <p>从网络上下载文件到硬盘相对简单，拿到文件输出流，网络上的输入流，一边读输入流一边写输出流，都读取完毕，关掉输入、输出流就好。
但是读取网络上的文件到内存，由于不知道网络上文件的具体大小，没法申请一个准确的byte数组大小。而且读取网络上的输入流时，是不知道一次能读到的数据包的大小的，必须一点点的读取保存，又涉及byte数组的重新申请，和最后resize一个合适的byte[]，相对麻烦一些，把自己写的一小段代码记录在此，方便日后的使用。</p>

<pre><code>public byte[] readBytesFromUrl(String urlStr, int initLength) {
        if (initLength == 0) {
            return null;
        }
        try {
            URL url = new URL(urlStr);
            URLConnection conn = url.openConnection();
            InputStream inputStream = conn.getInputStream();
            byte[] buffer = new byte[initLength];
            byte[] temp = new byte[1024];
            int bytesum = 0;
            int byteread = 0;
            while ((byteread = inputStream.read(temp)) != -1) {
                for (int i = 0; i &lt; byteread; i++) {
                    int index = bytesum + i;
                    if (index == buffer.length) {
                        byte[] newBuffer = new byte[buffer.length + initLength];
                        for (int j = 0; j &lt; buffer.length; j++) {
                            newBuffer[j] = buffer[j];
                        }
                        buffer = newBuffer;
                    }
                    buffer[index] = temp[i];
                }
                bytesum += byteread;
            }
            if (buffer.length &gt; bytesum) {
                byte[] newBuffer = new byte[bytesum];
                for (int i = 0; i &lt; bytesum; i++) {
                    newBuffer[i] = buffer[i];
                }
                buffer = newBuffer;
            }
            return buffer;
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }
</code></pre>


        <div class="more">
          <a href="/code/%E8%AF%BB%E5%8F%96%E7%BD%91%E7%BB%9C%E4%B8%8A%E6%96%87%E4%BB%B6%E5%88%B0%E5%86%85%E5%AD%98/" class="btn btn-small">阅读全文</a>
        </div>
      </div>
    
      <div class="post">
        <h1 class="title"><a href="/code/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E8%8E%B7%E5%8F%96/">项目中资源文件的获取</a> <span class="date">2011-11-09</span></h1>

        <ul>
<li>通过类加载器获取</li>
</ul>

<pre><code>InputStream inputStream1 = this.getClass().getClassLoader()
                .getResourceAsStream(&quot;ExternalResource/data.xml&quot;);
</code></pre>

<ul>
<li>spring ApplicationContext获取</li>
</ul>

<pre><code>public class SpringApplicationContextHolder implements ApplicationContextAware {
    private static ApplicationContext context;

    @Override
    public void setApplicationContext(ApplicationContext context) throws BeansException {
        SpringApplicationContextHolder.context = context;
    }

    public static Object getSpringBean(String beanName) {
        notEmpty(beanName, &quot;bean name is required&quot;);
        return context.getBean(beanName);
    }

    public static File getResourceFile(String resource) throws IOException {
        return context.getResource(resource).getFile();
    }
}
</code></pre>


        <div class="more">
          <a href="/code/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E8%8E%B7%E5%8F%96/" class="btn btn-small">阅读全文</a>
        </div>
      </div>
    

    <div class="pagination">
      <ul>
      
        
        
          <li><a href="/posts/1/">1</a></li>
        
      
        
          <li class="active"><a href="/posts/2/">2</a></li>
        
        
      
      </ul>
    </div>
  </div>
</div>

